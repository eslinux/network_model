
<html>
<head>
<title>lwIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="doxygen.css" type="text/css">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<table width="98%" border="0" align="center">
  <tr>
    <td>
      <h2>lwIP code documentation</h2>
<hr>

<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>etharp.h File Reference</h1>
<p>
<code>#include "<a class="el" href="pbuf_8h-source.html">lwip/pbuf.h</a>"</code><br>
<code>#include "<a class="el" href="ipv6_2lwip_2ip__addr_8h-source.html">lwip/ip_addr.h</a>"</code><br>
<code>#include "<a class="el" href="netif_8h-source.html">lwip/netif.h</a>"</code><br>
<code>#include "<a class="el" href="ipv6_2lwip_2ip_8h-source.html">lwip/ip.h</a>"</code><br>

<p>
<a href="etharp_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structeth__addr.html">eth_addr</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structeth__hdr.html">eth_hdr</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structetharp__hdr.html">etharp_hdr</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structethip__hdr.html">ethip_hdr</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a0">ARP_TMR_INTERVAL</a>&nbsp;&nbsp;&nbsp;10000</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a1">ETHTYPE_ARP</a>&nbsp;&nbsp;&nbsp;0x0806</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a2">ETHTYPE_IP</a>&nbsp;&nbsp;&nbsp;0x0800</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a4">etharp_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a5">etharp_tmr</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a6">etharp_ip_input</a> (struct <a class="el" href="structnetif.html">netif</a> *<a class="el" href="structnetif.html">netif</a>, struct <a class="el" href="structpbuf.html">pbuf</a> *p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a7">etharp_arp_input</a> (struct <a class="el" href="structnetif.html">netif</a> *<a class="el" href="structnetif.html">netif</a>, struct <a class="el" href="structeth__addr.html">eth_addr</a> *ethaddr, struct <a class="el" href="structpbuf.html">pbuf</a> *p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a8">etharp_output</a> (struct <a class="el" href="structnetif.html">netif</a> *<a class="el" href="structnetif.html">netif</a>, struct <a class="el" href="structip__addr.html">ip_addr</a> *ipaddr, struct <a class="el" href="structpbuf.html">pbuf</a> *q)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="err_8h.html#a13">err_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a9">etharp_query</a> (struct <a class="el" href="structnetif.html">netif</a> *<a class="el" href="structnetif.html">netif</a>, struct <a class="el" href="structip__addr.html">ip_addr</a> *ipaddr, struct <a class="el" href="structpbuf.html">pbuf</a> *q)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>PACK_STRUCT_BEGIN struct <a class="el" href="structeth__addr.html">eth_addr</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="etharp_8h.html#a3">PACK_STRUCT_STRUCT</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="etharp.h::ARP_TMR_INTERVAL" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ARP_TMR_INTERVAL&nbsp;&nbsp;&nbsp;10000
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="etharp_8h-source.html#l00082">82</a> of file <a class="el" href="etharp_8h-source.html">etharp.h</a>.
<p>
Referenced by <a class="el" href="ethernetif_8c-source.html#l00319">arp_timer()</a>, and <a class="el" href="ethernetif_8c-source.html#l00335">ethernetif_init()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="etharp.h::ETHTYPE_ARP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ETHTYPE_ARP&nbsp;&nbsp;&nbsp;0x0806
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="etharp_8h-source.html#l00084">84</a> of file <a class="el" href="etharp_8h-source.html">etharp.h</a>.
<p>
Referenced by <a class="el" href="etharp_8c-source.html#l00407">etharp_arp_input()</a>, <a class="el" href="etharp_8c-source.html#l00648">etharp_query()</a>, and <a class="el" href="ethernetif_8c-source.html#l00279">ethernetif_input()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="etharp.h::ETHTYPE_IP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ETHTYPE_IP&nbsp;&nbsp;&nbsp;0x0800
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="etharp_8h-source.html#l00085">85</a> of file <a class="el" href="etharp_8h-source.html">etharp.h</a>.
<p>
Referenced by <a class="el" href="etharp_8c-source.html#l00407">etharp_arp_input()</a>, <a class="el" href="etharp_8c-source.html#l00521">etharp_output()</a>, <a class="el" href="etharp_8c-source.html#l00648">etharp_query()</a>, <a class="el" href="ethernetif_8c-source.html#l00279">ethernetif_input()</a>, <a class="el" href="ethernetif_8c-source.html#l00179">ethernetif_output()</a>, and <a class="el" href="etharp_8c-source.html#l00246">update_arp_entry()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="etharp.h::etharp_arp_input" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structpbuf.html">pbuf</a>* etharp_arp_input </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structnetif.html">netif</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>netif</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structeth__addr.html">eth_addr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ethaddr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Responds to ARP requests, updates ARP entries and sends queued IP packets.<p>
Should be called for incoming ARP packets. The pbuf in the argument is freed by this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>netif</em>&nbsp;</td><td>The lwIP network interface on which the ARP packet pbuf arrived. </td></tr>
    <tr><td valign=top><em>pbuf</em>&nbsp;</td><td>The ARP packet that arrived on netif. Is freed by this function. </td></tr>
    <tr><td valign=top><em>ethaddr</em>&nbsp;</td><td>Ethernet address of netif.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NULL</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="pbuf_8c.html#a14">pbuf_free()</a> </dd></dl>

<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00407">407</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="ipv6_2lwip_2ip__addr_8h-source.html#l00040">ip_addr::addr</a>, <a class="el" href="etharp_8c-source.html#l00123">ARP_INSERT_FLAG</a>, <a class="el" href="etharp_8c-source.html#l00095">ARP_REPLY</a>, <a class="el" href="etharp_8c-source.html#l00094">ARP_REQUEST</a>, <a class="el" href="etharp_8c-source.html#l00100">ARPH_HWLEN_SET</a>, <a class="el" href="etharp_8c-source.html#l00101">ARPH_PROTOLEN_SET</a>, <a class="el" href="debug_8h-source.html#l00056">DBG_TRACE</a>, <a class="el" href="opt_8h-source.html#l00441">ETHARP_DEBUG</a>, <a class="el" href="etharp_8h-source.html#l00084">ETHTYPE_ARP</a>, <a class="el" href="etharp_8h-source.html#l00085">ETHTYPE_IP</a>, <a class="el" href="ipv4_2lwip_2inet_8h-source.html#l00065">htons</a>, <a class="el" href="netif_8h-source.html#l00097">netif::hwaddr_len</a>, <a class="el" href="etharp_8c-source.html#l00091">HWTYPE_ETHERNET</a>, <a class="el" href="netif_8h-source.html#l00073">netif::ip_addr</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00109">ip_addr_cmp</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00102">ip_addr_set</a>, <a class="el" href="structnetif.html#o6">netif::linkoutput</a>, <a class="el" href="debug_8h-source.html#l00077">LWIP_DEBUGF</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, <a class="el" href="pbuf_8h-source.html#l00072">pbuf::payload</a>, <a class="el" href="pbuf_8c-source.html#l00755">pbuf_free()</a>, <a class="el" href="pbuf_8h-source.html#l00081">pbuf::tot_len</a>, and <a class="el" href="etharp_8c-source.html#l00246">update_arp_entry()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="etharp.h::etharp_init" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void etharp_init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes ARP module. 
<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00129">129</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="etharp_8c-source.html#l00120">arp_table</a>, <a class="el" href="opt_8h-source.html#l00152">ARP_TABLE_SIZE</a>, <a class="el" href="etharp_8c.html#a23a12">ETHARP_STATE_EMPTY</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, and <a class="el" href="etharp_8c-source.html#l00112">etharp_entry::state</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="etharp.h::etharp_ip_input" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structpbuf.html">pbuf</a>* etharp_ip_input </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structnetif.html">netif</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>netif</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the ARP table using the given packet.<p>
Uses the incoming IP packet's source address to update the ARP cache for the local network. The function does not alter or free the packet. This function must be called before the packet p is passed to the IP layer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>netif</em>&nbsp;</td><td>The lwIP network interface on which the IP packet pbuf arrived. </td></tr>
    <tr><td valign=top><em>pbuf</em>&nbsp;</td><td>The IP packet that arrived on netif.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NULL</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="pbuf_8c.html#a14">pbuf_free()</a> </dd></dl>

<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00372">372</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="etharp_8c-source.html#l00123">ARP_INSERT_FLAG</a>, <a class="el" href="debug_8h-source.html#l00056">DBG_TRACE</a>, <a class="el" href="opt_8h-source.html#l00441">ETHARP_DEBUG</a>, <a class="el" href="netif_8h-source.html#l00073">netif::ip_addr</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00105">ip_addr_maskcmp</a>, <a class="el" href="debug_8h-source.html#l00077">LWIP_DEBUGF</a>, <a class="el" href="netif_8h-source.html#l00074">netif::netmask</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, <a class="el" href="pbuf_8h-source.html#l00072">pbuf::payload</a>, and <a class="el" href="etharp_8c-source.html#l00246">update_arp_entry()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="etharp.h::etharp_output" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structpbuf.html">pbuf</a>* etharp_output </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structnetif.html">netif</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>netif</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structip__addr.html">ip_addr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>q</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Resolve and fill-in Ethernet address header for outgoing packet.<p>
If ARP has the Ethernet address in cache, the given packet is returned, ready to be sent.<p>
If ARP does not have the Ethernet address in cache the packet is queued and a ARP request is sent (on a best-effort basis). This ARP request is returned as a pbuf, which should be sent by the caller.<p>
If ARP failed to allocate resources, NULL is returned.<p>
A returned non-NULL packet should be sent by the caller.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>netif</em>&nbsp;</td><td>The lwIP network interface which the IP packet will be sent on. </td></tr>
    <tr><td valign=top><em>ipaddr</em>&nbsp;</td><td>The IP address of the packet destination. </td></tr>
    <tr><td valign=top><em>pbuf</em>&nbsp;</td><td>The pbuf(s) containing the IP packet to be sent.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>If non-NULL, a packet ready to be sent. </dd></dl>

<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00521">521</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="ipv6_2lwip_2ip__addr_8h-source.html#l00040">ip_addr::addr</a>, <a class="el" href="etharp_8c-source.html#l00120">arp_table</a>, <a class="el" href="opt_8h-source.html#l00152">ARP_TABLE_SIZE</a>, <a class="el" href="debug_8h-source.html#l00056">DBG_TRACE</a>, <a class="el" href="etharp_8c-source.html#l00111">etharp_entry::ethaddr</a>, <a class="el" href="opt_8h-source.html#l00441">ETHARP_DEBUG</a>, <a class="el" href="etharp_8c-source.html#l00648">etharp_query()</a>, <a class="el" href="etharp_8c.html#a23a14">ETHARP_STATE_STABLE</a>, <a class="el" href="etharp_8c-source.html#l00119">ethbroadcast</a>, <a class="el" href="etharp_8h-source.html#l00085">ETHTYPE_IP</a>, <a class="el" href="netif_8h-source.html#l00075">netif::gw</a>, <a class="el" href="ipv4_2lwip_2inet_8h-source.html#l00065">htons</a>, <a class="el" href="netif_8h-source.html#l00099">netif::hwaddr</a>, <a class="el" href="netif_8h-source.html#l00097">netif::hwaddr_len</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00130">ip4_addr2</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00131">ip4_addr3</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00132">ip4_addr4</a>, <a class="el" href="netif_8h-source.html#l00073">netif::ip_addr</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00109">ip_addr_cmp</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00111">ip_addr_isany</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00113">ip_addr_isbroadcast</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00118">ip_addr_ismulticast</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00105">ip_addr_maskcmp</a>, <a class="el" href="debug_8h-source.html#l00077">LWIP_DEBUGF</a>, <a class="el" href="netif_8h-source.html#l00074">netif::netmask</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, <a class="el" href="pbuf_8h-source.html#l00072">pbuf::payload</a>, <a class="el" href="pbuf_8c-source.html#l00678">pbuf_header()</a>, and <a class="el" href="etharp_8c-source.html#l00112">etharp_entry::state</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="etharp.h::etharp_query" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="err_8h.html#a13">err_t</a> etharp_query </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structnetif.html">netif</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>netif</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structip__addr.html">ip_addr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structpbuf.html">pbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>q</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send an ARP request for the given IP address.<p>
Sends an ARP request for the given IP address, unless a request for this address is already pending. Optionally queues an outgoing packet on the resulting ARP entry.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>netif</em>&nbsp;</td><td>The lwIP network interface where ipaddr must be queried for. </td></tr>
    <tr><td valign=top><em>ipaddr</em>&nbsp;</td><td>The IP address to be resolved. </td></tr>
    <tr><td valign=top><em>q</em>&nbsp;</td><td>If non-NULL, a pbuf that must be queued on the ARP entry for the ipaddr IP address.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NULL.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>Might be used in the future by manual IP configuration as well.</dd></dl>
TODO: use the ctime field to see how long ago an ARP request was sent, possibly retry. 
<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00648">648</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="etharp_8c-source.html#l00094">ARP_REQUEST</a>, <a class="el" href="etharp_8c-source.html#l00120">arp_table</a>, <a class="el" href="opt_8h-source.html#l00152">ARP_TABLE_SIZE</a>, <a class="el" href="etharp_8c-source.html#l00100">ARPH_HWLEN_SET</a>, <a class="el" href="etharp_8c-source.html#l00101">ARPH_PROTOLEN_SET</a>, <a class="el" href="etharp_8c-source.html#l00116">etharp_entry::ctime</a>, <a class="el" href="debug_8h-source.html#l00058">DBG_STATE</a>, <a class="el" href="debug_8h-source.html#l00056">DBG_TRACE</a>, <a class="el" href="err_8h-source.html#l00044">ERR_MEM</a>, <a class="el" href="err_8h-source.html#l00043">ERR_OK</a>, <a class="el" href="err_8h-source.html#l00039">err_t</a>, <a class="el" href="opt_8h-source.html#l00441">ETHARP_DEBUG</a>, <a class="el" href="etharp_8c.html#a23a13">ETHARP_STATE_PENDING</a>, <a class="el" href="etharp_8c.html#a23a14">ETHARP_STATE_STABLE</a>, <a class="el" href="etharp_8h-source.html#l00084">ETHTYPE_ARP</a>, <a class="el" href="etharp_8h-source.html#l00085">ETHTYPE_IP</a>, <a class="el" href="etharp_8c-source.html#l00192">find_arp_entry()</a>, <a class="el" href="ipv4_2lwip_2inet_8h-source.html#l00065">htons</a>, <a class="el" href="netif_8h-source.html#l00099">netif::hwaddr</a>, <a class="el" href="netif_8h-source.html#l00097">netif::hwaddr_len</a>, <a class="el" href="etharp_8c-source.html#l00091">HWTYPE_ETHERNET</a>, <a class="el" href="netif_8h-source.html#l00073">netif::ip_addr</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00109">ip_addr_cmp</a>, <a class="el" href="ipv4_2lwip_2ip__addr_8h-source.html#l00102">ip_addr_set</a>, <a class="el" href="structnetif.html#o6">netif::linkoutput</a>, <a class="el" href="debug_8h-source.html#l00077">LWIP_DEBUGF</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, <a class="el" href="pbuf_8c-source.html#l00391">pbuf_alloc()</a>, <a class="el" href="pbuf_8c-source.html#l00755">pbuf_free()</a>, <a class="el" href="pbuf_8h.html#a26a9">PBUF_LINK</a>, <a class="el" href="pbuf_8h.html#a27a11">PBUF_RAM</a>, <a class="el" href="pbuf_8c-source.html#l00880">pbuf_ref()</a>, <a class="el" href="pbuf_8c-source.html#l01050">pbuf_take()</a>, and <a class="el" href="etharp_8c-source.html#l00112">etharp_entry::state</a>.
<p>
Referenced by <a class="el" href="dhcp_8c-source.html#l00156">dhcp_check()</a>, and <a class="el" href="etharp_8c-source.html#l00521">etharp_output()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="etharp.h::etharp_tmr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void etharp_tmr </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clears expired entries in the ARP table.<p>
This function should be called every ETHARP_TMR_INTERVAL microseconds (10 seconds), in order to expire entries in the ARP table. 
<p>
Definition at line <a class="el" href="etharp_8c-source.html#l00148">148</a> of file <a class="el" href="etharp_8c-source.html">etharp.c</a>.
<p>
References <a class="el" href="etharp_8c-source.html#l00087">ARP_MAXAGE</a>, <a class="el" href="etharp_8c-source.html#l00089">ARP_MAXPENDING</a>, <a class="el" href="etharp_8c-source.html#l00120">arp_table</a>, <a class="el" href="opt_8h-source.html#l00152">ARP_TABLE_SIZE</a>, <a class="el" href="etharp_8c-source.html#l00116">etharp_entry::ctime</a>, <a class="el" href="opt_8h-source.html#l00441">ETHARP_DEBUG</a>, <a class="el" href="etharp_8c.html#a23a12">ETHARP_STATE_EMPTY</a>, <a class="el" href="etharp_8c.html#a23a13">ETHARP_STATE_PENDING</a>, <a class="el" href="etharp_8c.html#a23a14">ETHARP_STATE_STABLE</a>, <a class="el" href="debug_8h-source.html#l00077">LWIP_DEBUGF</a>, <a class="el" href="def_8h-source.html#l00042">NULL</a>, <a class="el" href="pbuf_8c-source.html#l00755">pbuf_free()</a>, and <a class="el" href="etharp_8c-source.html#l00112">etharp_entry::state</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a3" doxytag="etharp.h::PACK_STRUCT_STRUCT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PACK_STRUCT_END PACK_STRUCT_BEGIN struct <a class="el" href="structetharp__hdr.html">etharp_hdr</a>  <a class="el" href="etharp_8h.html#a3">PACK_STRUCT_STRUCT</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
the ARP message     </td>
  </tr>
</table>
	</td>
  </tr>
</table>
<hr>
<div align="center">Copyright (c) 2001-2003 Swedish Institute of Computer Science</div>
</html>
