
<html>
<head>
<title>lwIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="doxygen.css" type="text/css">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<table width="98%" border="0" align="center">
  <tr>
    <td>
      <h2>lwIP code documentation</h2>
<hr>

<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>inet.c</h1><a href="inet_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * Copyright (c) 2001-2003 Swedish Institute of Computer Science.</span>
00003 <span class="comment"> * All rights reserved.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without modification,</span>
00006 <span class="comment"> * are permitted provided that the following conditions are met:</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> * 1. Redistributions of source code must retain the above copyright notice,</span>
00009 <span class="comment"> *    this list of conditions and the following disclaimer.</span>
00010 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright notice,</span>
00011 <span class="comment"> *    this list of conditions and the following disclaimer in the documentation</span>
00012 <span class="comment"> *    and/or other materials provided with the distribution.</span>
00013 <span class="comment"> * 3. The name of the author may not be used to endorse or promote products</span>
00014 <span class="comment"> *    derived from this software without specific prior written permission.</span>
00015 <span class="comment"> *</span>
00016 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED</span>
00017 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
00018 <span class="comment"> * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT</span>
00019 <span class="comment"> * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span>
00020 <span class="comment"> * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT</span>
00021 <span class="comment"> * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
00022 <span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
00023 <span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span>
00024 <span class="comment"> * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY</span>
00025 <span class="comment"> * OF SUCH DAMAGE.</span>
00026 <span class="comment"> *</span>
00027 <span class="comment"> * This file is part of the lwIP TCP/IP stack.</span>
00028 <span class="comment"> *</span>
00029 <span class="comment"> * Author: Adam Dunkels &lt;adam@sics.se&gt;</span>
00030 <span class="comment"> *</span>
00031 <span class="comment"> */</span>
00032 
00033 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00034 <span class="comment">/* inet.c</span>
00035 <span class="comment"> *</span>
00036 <span class="comment"> * Functions common to all TCP/IP modules, such as the Internet checksum and the</span>
00037 <span class="comment"> * byte order functions.</span>
00038 <span class="comment"> *</span>
00039 <span class="comment"> */</span>
00040 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00041 
00042 <span class="preprocessor">#include "<a class="code" href="opt_8h.html">lwip/opt.h</a>"</span>
00043 
00044 <span class="preprocessor">#include "<a class="code" href="arch_8h.html">lwip/arch.h</a>"</span>
00045 
00046 <span class="preprocessor">#include "<a class="code" href="def_8h.html">lwip/def.h</a>"</span>
00047 <span class="preprocessor">#include "lwip/inet.h"</span>
00048 
00049 
00050 <span class="comment">// *** CS *** dummy to make inet.c link</span>
00051 
00052 <span class="preprocessor">#ifdef __C166__</span>
00053 <span class="preprocessor"></span><span class="preprocessor">        #include &lt;ctype.h&gt;</span>
00054 <span class="keywordtype">char</span> isascii(<span class="keywordtype">char</span> c) 
00055 {
00056         <span class="keywordflow">return</span> isalpha(c); 
00057 }
00058 
00059 <span class="preprocessor">#endif</span>
00060 <span class="preprocessor"></span><span class="comment">/*</span>
00061 <span class="comment">char isascii(char c) { return (c == c); }</span>
00062 <span class="comment">char islower(char  c) { return (c == c); }</span>
00063 <span class="comment">char isxdigit(char  c) { return (c == c); }</span>
00064 <span class="comment">char isdigit(char  c) { return (c == c); }</span>
00065 <span class="comment">char isspace(char  c) { return (c == c); }</span>
00066 <span class="comment">*/</span>
00067 
00068 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00069 <span class="keyword">static</span> u16_t
<a name="l00070"></a><a class="code" href="inet_8c.html#a0">00070</a> <a class="code" href="inet_8c.html#a0">lwip_chksum</a>(<span class="keywordtype">void</span> *dataptr, <span class="keywordtype">int</span> len)
00071 {
00072   u32_t acc;
00073 
00074   <a class="code" href="debug_8h.html#a12">LWIP_DEBUGF</a>(<a class="code" href="opt_8h.html#a67">INET_DEBUG</a>, (<span class="stringliteral">"lwip_chksum(%p, %d)\n"</span>, (<span class="keywordtype">void</span> *)dataptr, len));
00075   <span class="keywordflow">for</span>(acc = 0; len &gt; 1; len -= 2) {
00076       <span class="comment">/*    acc = acc + *((u16_t *)dataptr)++;*/</span>
00077     acc += *(u16_t *)dataptr;
00078     dataptr = (<span class="keywordtype">void</span> *)((u16_t *)dataptr + 1);
00079   }
00080 
00081   <span class="comment">/* add up any odd byte */</span>
00082   <span class="keywordflow">if</span> (len == 1) {
00083     acc += <a class="code" href="ipv4_2lwip_2inet_8h.html#a0">htons</a>((u16_t)((*(u8_t *)dataptr) &amp; 0xff) &lt;&lt; 8);
00084     <a class="code" href="debug_8h.html#a12">LWIP_DEBUGF</a>(<a class="code" href="opt_8h.html#a67">INET_DEBUG</a>, (<span class="stringliteral">"inet: chksum: odd byte %d\n"</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(*(u8_t *)dataptr)));
00085   } <span class="keywordflow">else</span> {
00086     <a class="code" href="debug_8h.html#a12">LWIP_DEBUGF</a>(<a class="code" href="opt_8h.html#a67">INET_DEBUG</a>, (<span class="stringliteral">"inet: chksum: no odd byte\n"</span>));
00087   }
00088   acc = (acc &gt;&gt; 16) + (acc &amp; 0xffffUL);
00089 
00090   <span class="keywordflow">if</span> ((acc &amp; 0xffff0000) != 0) {
00091     acc = (acc &gt;&gt; 16) + (acc &amp; 0xffffUL);
00092   }
00093 
00094   <span class="keywordflow">return</span> (u16_t)acc;
00095 }
00096 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00097 <span class="comment">/* inet_chksum_pseudo:</span>
00098 <span class="comment"> *</span>
00099 <span class="comment"> * Calculates the pseudo Internet checksum used by TCP and UDP for a pbuf chain.</span>
00100 <span class="comment"> */</span>
00101 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00102 u16_t
<a name="l00103"></a><a class="code" href="inet_8c.html#a1">00103</a> <a class="code" href="inet6_8c.html#a1">inet_chksum_pseudo</a>(<span class="keyword">struct</span> <a class="code" href="structpbuf.html">pbuf</a> *p,
00104        <span class="keyword">struct</span> <a class="code" href="structip__addr.html">ip_addr</a> *src, <span class="keyword">struct</span> <a class="code" href="structip__addr.html">ip_addr</a> *dest,
00105        u8_t proto, u16_t proto_len)
00106 {
00107   u32_t acc;
00108   <span class="keyword">struct </span><a class="code" href="structpbuf.html">pbuf</a> *q;
00109   u8_t swapped;
00110 
00111   acc = 0;
00112   swapped = 0;
00113   <span class="comment">/* iterate through all pbuf in chain */</span>
00114   <span class="keywordflow">for</span>(q = p; q != <a class="code" href="def_8h.html#a2">NULL</a>; q = q-&gt;next) {
00115     <a class="code" href="debug_8h.html#a12">LWIP_DEBUGF</a>(<a class="code" href="opt_8h.html#a67">INET_DEBUG</a>, (<span class="stringliteral">"inet_chksum_pseudo(): checksumming pbuf %p (has next %p) \n"</span>,
00116       (<span class="keywordtype">void</span> *)q, (<span class="keywordtype">void</span> *)q-&gt;next));
00117     acc += <a class="code" href="inet_8c.html#a0">lwip_chksum</a>(q-&gt;payload, q-&gt;len);
00118     <span class="comment">/*LWIP_DEBUGF(INET_DEBUG, ("inet_chksum_pseudo(): unwrapped lwip_chksum()=%lx \n", acc));*/</span>
00119     <span class="keywordflow">while</span> (acc &gt;&gt; 16) {
00120       acc = (acc &amp; 0xffffUL) + (acc &gt;&gt; 16);
00121     }
00122     <span class="keywordflow">if</span> (q-&gt;len % 2 != 0) {
00123       swapped = 1 - swapped;
00124       acc = ((acc &amp; 0xff) &lt;&lt; 8) | ((acc &amp; 0xff00UL) &gt;&gt; 8);
00125     }
00126     <span class="comment">/*LWIP_DEBUGF(INET_DEBUG, ("inet_chksum_pseudo(): wrapped lwip_chksum()=%lx \n", acc));*/</span>
00127   }
00128 
00129   <span class="keywordflow">if</span> (swapped) {
00130     acc = ((acc &amp; 0xff) &lt;&lt; 8) | ((acc &amp; 0xff00UL) &gt;&gt; 8);
00131   }
00132   acc += (src-&gt;<a class="code" href="structip__addr.html#o0">addr</a> &amp; 0xffffUL);
00133   acc += ((src-&gt;<a class="code" href="structip__addr.html#o0">addr</a> &gt;&gt; 16) &amp; 0xffffUL);
00134   acc += (dest-&gt;<a class="code" href="structip__addr.html#o0">addr</a> &amp; 0xffffUL);
00135   acc += ((dest-&gt;<a class="code" href="structip__addr.html#o0">addr</a> &gt;&gt; 16) &amp; 0xffffUL);
00136   acc += (u32_t)<a class="code" href="ipv4_2lwip_2inet_8h.html#a0">htons</a>((u16_t)proto);
00137   acc += (u32_t)<a class="code" href="ipv4_2lwip_2inet_8h.html#a0">htons</a>(proto_len);
00138 
00139   <span class="keywordflow">while</span> (acc &gt;&gt; 16) {
00140     acc = (acc &amp; 0xffffUL) + (acc &gt;&gt; 16);
00141   }
00142   <a class="code" href="debug_8h.html#a12">LWIP_DEBUGF</a>(<a class="code" href="opt_8h.html#a67">INET_DEBUG</a>, (<span class="stringliteral">"inet_chksum_pseudo(): pbuf chain lwip_chksum()=%lx\n"</span>, acc));
00143   <span class="keywordflow">return</span> ~(acc &amp; 0xffffUL);
00144 }
00145 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00146 <span class="comment">/* inet_chksum:</span>
00147 <span class="comment"> *</span>
00148 <span class="comment"> * Calculates the Internet checksum over a portion of memory. Used primarely for IP</span>
00149 <span class="comment"> * and ICMP.</span>
00150 <span class="comment"> */</span>
00151 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00152 u16_t
<a name="l00153"></a><a class="code" href="inet_8c.html#a2">00153</a> <a class="code" href="inet_8c.html#a2">inet_chksum</a>(<span class="keywordtype">void</span> *dataptr, u16_t len)
00154 {
00155   u32_t acc;
00156 
00157   acc = <a class="code" href="inet_8c.html#a0">lwip_chksum</a>(dataptr, len);
00158   <span class="keywordflow">while</span> (acc &gt;&gt; 16) {
00159     acc = (acc &amp; 0xffff) + (acc &gt;&gt; 16);
00160   }
00161   <span class="keywordflow">return</span> ~(acc &amp; 0xffff);
00162 }
00163 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00164 u16_t
<a name="l00165"></a><a class="code" href="inet_8c.html#a3">00165</a> <a class="code" href="inet_8c.html#a3">inet_chksum_pbuf</a>(<span class="keyword">struct</span> <a class="code" href="structpbuf.html">pbuf</a> *p)
00166 {
00167   u32_t acc;
00168   <span class="keyword">struct </span><a class="code" href="structpbuf.html">pbuf</a> *q;
00169   u8_t swapped;
00170 
00171   acc = 0;
00172   swapped = 0;
00173   <span class="keywordflow">for</span>(q = p; q != <a class="code" href="def_8h.html#a2">NULL</a>; q = q-&gt;next) {
00174     acc += <a class="code" href="inet_8c.html#a0">lwip_chksum</a>(q-&gt;payload, q-&gt;len);
00175     <span class="keywordflow">while</span> (acc &gt;&gt; 16) {
00176       acc = (acc &amp; 0xffffUL) + (acc &gt;&gt; 16);
00177     }
00178     <span class="keywordflow">if</span> (q-&gt;len % 2 != 0) {
00179       swapped = 1 - swapped;
00180       acc = (acc &amp; 0x00ffUL &lt;&lt; 8) | (acc &amp; 0xff00UL &gt;&gt; 8);
00181     }
00182   }
00183 
00184   <span class="keywordflow">if</span> (swapped) {
00185     acc = ((acc &amp; 0x00ffUL) &lt;&lt; 8) | ((acc &amp; 0xff00UL) &gt;&gt; 8);
00186   }
00187   <span class="keywordflow">return</span> ~(acc &amp; 0xffffUL);
00188 }
00189 
00190 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00191  <span class="comment">/*</span>
00192 <span class="comment">  * Ascii internet address interpretation routine.</span>
00193 <span class="comment">  * The value returned is in network order.</span>
00194 <span class="comment">  */</span>
00195 
00196  <span class="comment">/*  */</span>
00197  <span class="comment">/* inet_addr */</span>
<a name="l00198"></a><a class="code" href="inet_8c.html#a4">00198</a>  u32_t <a class="code" href="inet_8c.html#a4">inet_addr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cp)
00199  {
00200      <span class="keyword">struct </span><a class="code" href="structin__addr.html">in_addr</a> val;
00201 
00202      <span class="keywordflow">if</span> (<a class="code" href="inet_8c.html#a5">inet_aton</a>(cp, &amp;val)) {
00203          <span class="keywordflow">return</span> (val.<a class="code" href="structin__addr.html#o0">s_addr</a>);
00204      }
00205      <span class="keywordflow">return</span> (<a class="code" href="ipv4_2lwip_2ip__addr_8h.html#a2">INADDR_NONE</a>);
00206  }
00207 
00208  <span class="comment">/*</span>
00209 <span class="comment">  * Check whether "cp" is a valid ascii representation</span>
00210 <span class="comment">  * of an Internet address and convert to a binary address.</span>
00211 <span class="comment">  * Returns 1 if the address is valid, 0 if not.</span>
00212 <span class="comment">  * This replaces inet_addr, the return value from which</span>
00213 <span class="comment">  * cannot distinguish between failure and a local broadcast address.</span>
00214 <span class="comment">  */</span>
00215  <span class="comment">/*  */</span>
00216  <span class="comment">/* inet_aton */</span>
<a name="l00217"></a><a class="code" href="inet_8c.html#a5">00217</a>  <span class="keywordtype">int</span> <a class="code" href="inet_8c.html#a5">inet_aton</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cp, <span class="keyword">struct</span> <a class="code" href="structin__addr.html">in_addr</a> *addr)
00218  {
00219      u32_t val;
00220      <span class="keywordtype">int</span> base, n;
00221      <span class="keywordtype">char</span> c;
00222      u32_t parts[4];
00223      u32_t* pp = parts;
00224 
00225      c = *cp;
00226      <span class="keywordflow">for</span> (;;) {
00227          <span class="comment">/*</span>
00228 <span class="comment">          * Collect number up to ``.''.</span>
00229 <span class="comment">          * Values are specified as for C:</span>
00230 <span class="comment">          * 0x=hex, 0=octal, isdigit=decimal.</span>
00231 <span class="comment">          */</span>
00232          <span class="keywordflow">if</span> (!isdigit(c))
00233              <span class="keywordflow">return</span> (0);
00234          val = 0; base = 10;
00235          <span class="keywordflow">if</span> (c == <span class="charliteral">'0'</span>) {
00236              c = *++cp;
00237              <span class="keywordflow">if</span> (c == <span class="charliteral">'x'</span> || c == <span class="charliteral">'X'</span>)
00238                  base = 16, c = *++cp;
00239              <span class="keywordflow">else</span>
00240                  base = 8;
00241          }
00242          <span class="keywordflow">for</span> (;;) {
00243              <span class="keywordflow">if</span> (isascii(c) &amp;&amp; isdigit(c)) {
00244                  val = (val * base) + (c - <span class="charliteral">'0'</span>);
00245                  c = *++cp;
00246              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (base == 16 &amp;&amp; isascii(c) &amp;&amp; isxdigit(c)) {
00247                  val = (val &lt;&lt; 4) |
00248                      (c + 10 - (islower(c) ? <span class="charliteral">'a'</span> : <span class="charliteral">'A'</span>));
00249                  c = *++cp;
00250              } <span class="keywordflow">else</span>
00251              <span class="keywordflow">break</span>;
00252          }
00253          <span class="keywordflow">if</span> (c == <span class="charliteral">'.'</span>) {
00254              <span class="comment">/*</span>
00255 <span class="comment">              * Internet format:</span>
00256 <span class="comment">              *  a.b.c.d</span>
00257 <span class="comment">              *  a.b.c   (with c treated as 16 bits)</span>
00258 <span class="comment">              *  a.b (with b treated as 24 bits)</span>
00259 <span class="comment">              */</span>
00260              <span class="keywordflow">if</span> (pp &gt;= parts + 3)
00261                  <span class="keywordflow">return</span> (0);
00262              *pp++ = val;
00263              c = *++cp;
00264          } <span class="keywordflow">else</span>
00265              <span class="keywordflow">break</span>;
00266      }
00267      <span class="comment">/*</span>
00268 <span class="comment">      * Check for trailing characters.</span>
00269 <span class="comment">      */</span>
00270      <span class="keywordflow">if</span> (c != <span class="charliteral">'\0'</span> &amp;&amp; (!isascii(c) || !isspace(c)))
00271          <span class="keywordflow">return</span> (0);
00272      <span class="comment">/*</span>
00273 <span class="comment">      * Concoct the address according to</span>
00274 <span class="comment">      * the number of parts specified.</span>
00275 <span class="comment">      */</span>
00276      n = pp - parts + 1;
00277      <span class="keywordflow">switch</span> (n) {
00278 
00279      <span class="keywordflow">case</span> 0:
00280          <span class="keywordflow">return</span> (0);     <span class="comment">/* initial nondigit */</span>
00281 
00282      <span class="keywordflow">case</span> 1:             <span class="comment">/* a -- 32 bits */</span>
00283          <span class="keywordflow">break</span>;
00284 
00285      <span class="keywordflow">case</span> 2:             <span class="comment">/* a.b -- 8.24 bits */</span>
00286          <span class="keywordflow">if</span> (val &gt; 0xffffff)
00287              <span class="keywordflow">return</span> (0);
00288          val |= parts[0] &lt;&lt; 24;
00289          <span class="keywordflow">break</span>;
00290 
00291      <span class="keywordflow">case</span> 3:             <span class="comment">/* a.b.c -- 8.8.16 bits */</span>
00292          <span class="keywordflow">if</span> (val &gt; 0xffff)
00293              <span class="keywordflow">return</span> (0);
00294          val |= (parts[0] &lt;&lt; 24) | (parts[1] &lt;&lt; 16);
00295          <span class="keywordflow">break</span>;
00296 
00297      <span class="keywordflow">case</span> 4:             <span class="comment">/* a.b.c.d -- 8.8.8.8 bits */</span>
00298          <span class="keywordflow">if</span> (val &gt; 0xff)
00299              <span class="keywordflow">return</span> (0);
00300          val |= (parts[0] &lt;&lt; 24) | (parts[1] &lt;&lt; 16) | (parts[2] &lt;&lt; 8);
00301          <span class="keywordflow">break</span>;
00302      }
00303      <span class="keywordflow">if</span> (addr)
00304          addr-&gt;<a class="code" href="structin__addr.html#o0">s_addr</a> = <a class="code" href="ipv4_2lwip_2inet_8h.html#a2">htonl</a>(val);
00305      <span class="keywordflow">return</span> (1);
00306  }
00307 
00308 <span class="comment">/* Convert numeric IP address into decimal dotted ASCII representation.</span>
00309 <span class="comment"> * returns ptr to static buffer; not reentrant!</span>
00310 <span class="comment"> */</span>
<a name="l00311"></a><a class="code" href="inet_8c.html#a6">00311</a> u8_t *<a class="code" href="inet_8c.html#a6">inet_ntoa</a>(u32_t addr)
00312 {
00313   <span class="keyword">static</span> u8_t str[16];
00314   u8_t inv[3];
00315   u8_t *rp;
00316   u8_t *ap;
00317   u8_t rem;
00318   u8_t n;
00319   u8_t i;
00320 
00321   rp = str;
00322   ap = (u8_t *)&amp;addr;
00323   <span class="keywordflow">for</span>(n = 0; n &lt; 4; n++) {
00324     i = 0;
00325     <span class="keywordflow">do</span> {
00326       rem = *ap % (u8_t)10;
00327       *ap /= (u8_t)10;
00328       inv[i++] = <span class="charliteral">'0'</span> + rem;
00329     } <span class="keywordflow">while</span>(*ap);
00330     <span class="keywordflow">while</span>(i--)
00331       *rp++ = inv[i];
00332     *rp++ = <span class="charliteral">'.'</span>;
00333     ap++;
00334   }
00335   *--rp = 0;
00336   <span class="keywordflow">return</span> str;
00337 }
00338 
00339 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00340 <span class="preprocessor">#ifndef BYTE_ORDER</span>
00341 <span class="preprocessor"></span><span class="preprocessor">#error BYTE_ORDER is not defined</span>
00342 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00343 <span class="preprocessor"></span><span class="preprocessor">#if BYTE_ORDER == LITTLE_ENDIAN</span>
00344 <span class="preprocessor"></span><span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00345 u16_t
<a name="l00346"></a><a class="code" href="inet_8c.html#a7">00346</a> <a class="code" href="ipv4_2lwip_2inet_8h.html#a0">htons</a>(u16_t n)
00347 {
00348   <span class="keywordflow">return</span> ((n &amp; 0xff) &lt;&lt; 8) | ((n &amp; 0xff00) &gt;&gt; 8);
00349 }
00350 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00351 u16_t
<a name="l00352"></a><a class="code" href="inet_8c.html#a8">00352</a> <a class="code" href="ipv4_2lwip_2inet_8h.html#a1">ntohs</a>(u16_t n)
00353 {
00354   <span class="keywordflow">return</span> <a class="code" href="ipv4_2lwip_2inet_8h.html#a0">htons</a>(n);
00355 }
00356 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00357 u32_t
<a name="l00358"></a><a class="code" href="inet_8c.html#a9">00358</a> <a class="code" href="ipv4_2lwip_2inet_8h.html#a2">htonl</a>(u32_t n)
00359 {
00360   <span class="keywordflow">return</span> ((n &amp; 0xff) &lt;&lt; 24) |
00361     ((n &amp; 0xff00) &lt;&lt; 8) |
00362     ((n &amp; 0xff0000) &gt;&gt; 8) |
00363     ((n &amp; 0xff000000) &gt;&gt; 24);
00364 }
00365 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00366 u32_t
<a name="l00367"></a><a class="code" href="inet_8c.html#a10">00367</a> <a class="code" href="ipv4_2lwip_2inet_8h.html#a3">ntohl</a>(u32_t n)
00368 {
00369   <span class="keywordflow">return</span> <a class="code" href="ipv4_2lwip_2inet_8h.html#a2">htonl</a>(n);
00370 }
00371 <span class="comment">/*-----------------------------------------------------------------------------------*/</span>
00372 <span class="preprocessor">#endif </span><span class="comment">/* BYTE_ORDER == LITTLE_ENDIAN */</span>
</pre></div>	</td>
  </tr>
</table>
<hr>
<div align="center">Copyright (c) 2001-2003 Swedish Institute of Computer Science</div>
</html>
